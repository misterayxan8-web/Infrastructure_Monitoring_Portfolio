# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║                    PROMETHEUS CONFIGURATION FILE                              ║
# ║                    Infrastructure Monitoring System                           ║
# ║                    Author: Aykhan | Version: 3.1 (FIXED)                      ║
# ╚══════════════════════════════════════════════════════════════════════════════╝
#
# LOCATION: /etc/prometheus/prometheus.yml
#
# AFTER CHANGES RUN:
#   sudo systemctl restart prometheus
#   OR
#   curl -X POST http://localhost:9090/-/reload
#
# ════════════════════════════════════════════════════════════════════════════════

# ┌──────────────────────────────────────────────────────────────────────────────┐
# │ GLOBAL SETTINGS                                                              │
# └──────────────────────────────────────────────────────────────────────────────┘
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

# ┌──────────────────────────────────────────────────────────────────────────────┐
# │ ALERTMANAGER (Optional - uncomment if you have Alertmanager)                 │
# └──────────────────────────────────────────────────────────────────────────────┘
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['localhost:9093']

# ┌──────────────────────────────────────────────────────────────────────────────┐
# │ RULE FILES                                                                   │
# └──────────────────────────────────────────────────────────────────────────────┘
rule_files:
  - "/etc/prometheus/rules/*.yml"

# ┌──────────────────────────────────────────────────────────────────────────────┐
# │ SCRAPE CONFIGURATIONS                                                        │
# └──────────────────────────────────────────────────────────────────────────────┘
scrape_configs:

  # ════════════════════════════════════════════════════════════════════════════
  # JOB 1: PROMETHEUS SELF-MONITORING
  # ════════════════════════════════════════════════════════════════════════════
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # ════════════════════════════════════════════════════════════════════════════
  # JOB 2: NODE EXPORTER - SYSTEM METRICS (CPU, Memory, Disk)
  # Install: sudo dnf install node_exporter -y
  # Start: sudo systemctl enable --now node_exporter
  # ════════════════════════════════════════════════════════════════════════════
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['localhost:9100']

  # ════════════════════════════════════════════════════════════════════════════
  # JOB 3: CUSTOM METRICS EXPORTER - YOUR KPI METRICS FROM metrics.json
  # Script: metrics_exporter.py
  # Port: 9101
  # ════════════════════════════════════════════════════════════════════════════
  - job_name: 'metrics-exporter'
    scrape_interval: 10s
    static_configs:
      - targets: ['localhost:9101']

  # ════════════════════════════════════════════════════════════════════════════
  # JOB 4: SERVICE CHECKER - SYSTEMD SERVICE STATUS
  # Script: service_checker.py
  # Port: 9102
  # ════════════════════════════════════════════════════════════════════════════
  - job_name: 'service-checker'
    scrape_interval: 30s
    static_configs:
      - targets: ['localhost:9102']

# ════════════════════════════════════════════════════════════════════════════════
# HOW TO ADD MORE SERVERS:
# ════════════════════════════════════════════════════════════════════════════════
#
# Add targets to the node-exporter job:
#
#   - job_name: 'node-exporter'
#     static_configs:
#       - targets:
#           - 'localhost:9100'
#           - '192.168.1.10:9100'
#           - '192.168.1.11:9100'
#
# ════════════════════════════════════════════════════════════════════════════════
